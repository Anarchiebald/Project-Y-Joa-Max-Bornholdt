<div>
  <h2>Registration</h2>
  <form (ngSubmit)="register()" #registerForm="ngForm">
    <label for="username">Username:</label>
    <input type="text" id="username" [(ngModel)]="username" name="username" required minlength="3" maxlength="20">
    @if (isControlInvalid(registerForm, 'username')) {
    <div>
      <span *ngIf="registerForm.controls['username']?.errors?.['required']">Username is required.</span>
      <span *ngIf="registerForm.controls['username']?.errors?.['maxlength']">Max 20 characters</span>
      <span *ngIf="registerForm.controls['username']?.errors?.['minlength']">Min 3 characters</span>
    </div>
    }

    <label for="firstName">First Name:</label>
    <input type="text" id="firstName" [(ngModel)]="firstName" name="firstName" required minlength="3" maxlength="20">
    @if (isControlInvalid(registerForm, 'firstName')){
    <div>
      <span *ngIf="registerForm.controls['firstName']?.errors?.['required']">First Name is required</span>
      <span *ngIf="registerForm.controls['firstName']?.errors?.['maxlength']">Max 20 characters</span>
      <span *ngIf="registerForm.controls['firstName']?.errors?.['minlength']">Min 3 characters</span>
    </div>
    }

    <label for="lastName">Last Name:</label>
    <input type="text" id="lastName" [(ngModel)]="lastName" name="lastName" required minlength="3" maxlength="20">
    @if (isControlInvalid(registerForm, 'lastName')) {
      <div>
        <span *ngIf="registerForm.controls['lastName']?.errors?.['required']">Last Name is required</span>
        <span *ngIf="registerForm.controls['lastName']?.errors?.['maxlength']">Max 20 characters</span>
        <span *ngIf="registerForm.controls['lastName']?.errors?.['minlength']">Min 3 characters</span>
      </div>
    }
    <label for="email">Email:</label>
    <input type="email" id="email" [(ngModel)]="email" name="email" required email>
    @if (isControlInvalid(registerForm, 'email')) {
      <div>
        <span *ngIf="registerForm.controls['email']?.errors?.['required']">Email is required</span>
        <span *ngIf="registerForm.controls['email']?.errors?.['email']">Please enter a valid email</span>
      </div>
    }

    <label for="password">Password:</label>
    <input type="password" id="password" [(ngModel)]="password" name="password" required minlength="8">
    @if (isControlInvalid(registerForm, 'password')) {
    <div>
      <span *ngIf="registerForm.controls['password']?.errors?.['required']">Password is required</span>
      <span *ngIf="registerForm.controls['password']?.errors?.['minlength']">Min 8 characters</span>
    </div>
    }

    <button type="submit" [disabled]="registerForm.invalid">Register</button>

  </form>
  @if (errorMessage) {
    <p class="error-message">{{ errorMessage }}</p>
  }
  <p class="login-link">Do you already have an account? <a href="/login">Log in here</a></p>
</div>
